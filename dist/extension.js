"use strict";var S=Object.create;var l=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty;var $=(e,o)=>{for(var t in o)l(e,t,{get:o[t],enumerable:!0})},g=(e,o,t,r)=>{if(o&&typeof o=="object"||typeof o=="function")for(let a of B(o))!I.call(e,a)&&a!==t&&l(e,a,{get:()=>o[a],enumerable:!(r=w(o,a))||r.enumerable});return e};var p=(e,o,t)=>(t=e!=null?S(T(e)):{},g(o||!e||!e.__esModule?l(t,"default",{value:e,enumerable:!0}):t,e)),x=e=>g(l({},"__esModule",{value:!0}),e);var y={};$(y,{activate:()=>L,deactivate:()=>P});module.exports=x(y);var s=p(require("vscode")),h=p(require("http")),n,i,c=!1,D="http://speedtest.tele2.net/100MB.zip";function L(e){n=s.window.createStatusBarItem(s.StatusBarAlignment.Right,100),n.command="leekpulse.toggle",n.tooltip="Click to Toggle Speed Test (Save Data)",e.subscriptions.push(n);let o=s.commands.registerCommand("leekpulse.toggle",()=>{c?m():d()});e.subscriptions.push(o);let t=s.workspace.onDidChangeConfiguration(u=>{u.affectsConfiguration("leekpulse.interval")&&c&&d()});e.subscriptions.push(t),s.workspace.getConfiguration("leekpulse").get("enableAutoStart",!1)?d():m(),n.show()}function d(){i&&clearInterval(i),c=!0,n.text="$(sync~spin) LeekPulse: Starting...",n.backgroundColor=void 0;let t=s.workspace.getConfiguration("leekpulse").get("interval",10)*1e3;k(),i=setInterval(k,t)}function m(){i&&clearInterval(i),c=!1,n.text="$(circle-slash) LeekPulse: Paused",n.backgroundColor=void 0}function k(){if(!c)return;let e=800,o=0,t=Date.now();n.text="$(cloud-download) LeekPulse: Testing...";let r=h.get(D,a=>{a.on("data",u=>{o+=u.length;let f=Date.now()-t;if(f>=e){r.destroy();let C=f/1e3,b=o*8/C/1e6;v(b,!0)}})});r.on("error",a=>{v(0,!1)}),r.setTimeout(2e3,()=>{r.destroy()})}function v(e,o){if(!c)return;if(!o){n.text="$(plug) LeekPulse: Offline",n.backgroundColor=new s.ThemeColor("statusBarItem.errorBackground");return}let t="$(rocket)",r;e>100?t="$(rocket)":e>20?t="$(check)":e>5?(t="$(dashboard)",r=new s.ThemeColor("statusBarItem.warningBackground")):(t="$(alert)",r=new s.ThemeColor("statusBarItem.errorBackground")),n.text=`LeekPulse ${t} ${e.toFixed(1)} Mbps`,n.backgroundColor=r}function P(){i&&clearInterval(i)}0&&(module.exports={activate,deactivate});
